var rateVal,nperVal,pvVal,pvValinminus,fvval,totalInterest,existInv,chartInvested,chartFvval,chartPvVal;function RegularCalculate(){rateVal=parseInt(document.getElementById("interestrateInput").value)/100,nperVal=12*parseInt(document.getElementById("yearsInvestInput").value),pvVal=parseInt(document.getElementById("amtInvestInput").value.replace(/,/g,"")),existInv=parseInt(-Math.abs(document.getElementById("periodicInput").value.replace(/,/g,""))),pvValinminus=-Math.abs(pvVal),fvval=formulajs.FV(rateVal/12,nperVal,pvValinminus,existInv).toFixed(0),console.log(existInv),totalInterest=interrest(fvval,pvVal),document.getElementById("yourReturn").textContent=Number(fvval).toLocaleString("en-IN"),document.querySelector("#totalInvested").textContent=Number(Math.abs(pvVal)).toLocaleString("en-IN"),document.getElementById("percent_val").textContent=document.getElementById("interestrateInput").value,document.querySelector(".years_val").textContent=nperVal/12,chartInvested=[pvVal*nperVal],console.log(chartInvested),chartFvval=[parseInt(fvval)]}function onetimeCalculate(){rateVal=parseInt(document.getElementById("interestrateInput").value)/100,nperVal=parseInt(document.getElementById("yearsInvestInput").value),pvVal=parseInt(document.getElementById("amtInvestInput").value.replace(/,/g,"")),existInv=parseInt(-Math.abs(document.getElementById("extistingInvestmentInput").value.replace(/,/g,""))),pvValinminus=-Math.abs(pvVal),totalInterest=interrest(fvval=formulajs.FV(rateVal,nperVal,existInv,pvValinminus,0).toFixed(0),pvVal),console.log(Number(fvval).toLocaleString("en-IN")),document.getElementById("yourReturn").textContent=Number(fvval).toLocaleString("en-IN"),document.querySelector("#totalInvested").textContent=Number(Math.abs(pvVal)).toLocaleString("en-IN"),chartInvested=[pvVal],chartFvval=[parseInt(fvval)]}function interrest(e,t){return(e-t).toFixed(2)}function chartLine(){var e=[new Date().getFullYear()],t=document.getElementById("investment_chart");myChart=new Chart(t,{type:"bar",data:{labels:e,datasets:[{label:"Invested Amount",data:chartInvested,pointBorderColor:"#ED1C24",backgroundColor:"#ED1C24",borderColor:"#ED1C24",borderWidth:0,maxBarThickness:50,minBarLength:50},{label:"Your Returns",data:chartFvval,pointBorderColor:"#004A8F",backgroundColor:"#004A8F",borderColor:"#004A8F",borderWidth:0,maxBarThickness:50,minBarLength:50},]},options:{scales:{y:{display:!0,ticks:{color:"#004A8F",callback:function(e,t,a){return 1e7<=e?e=(e/1e7).toFixed(1)+" Cr":1e5<=e?e=(e/1e5).toFixed(1)+" Lac":1e3<=e&&(e=(e/1e3).toFixed(1)+" K"),e}}},x:{display:!1}},plugins:{legend:{display:!1},htmlLegend:{containerID:"legend"},tooltip:{displayColors:!1,backgroundColor:function(e){return e=e.tooltip.labelColors[0].borderColor},callbacks:{title:function(e,t){return""},displayTitle:!1,label:function(e){var t;return null!==e.parsed.y?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e.parsed.y):t}}}}},layout:{padding:{left:50}},plugins:[{id:"htmlLegend",afterUpdate(e,t,a){let n=(e=>{let t=document.getElementById(e);return(e=t.querySelector("ul"))||((e=document.createElement("ul")).style.display="flex",e.style.flexDirection="row",e.style.margin=0,e.style.padding=0,t.appendChild(e)),e})(a.containerID);for(;n.firstChild;)n.firstChild.remove();let l=e.options.plugins.legend.labels.generateLabels(e);l.forEach(t=>{let a=document.createElement("li"),l=(a.classList="legends_li",a.onclick=()=>{var a=e.config.type;"pie"===a||"doughnut"===a?e.toggleDataVisibility(t.index):e.setDatasetVisibility(t.datasetIndex,!e.isDatasetVisible(t.datasetIndex)),e.update()},document.createElement("span")),r=(l.style.background=t.fillStyle,l.classList="legend_box",document.createElement("p"));r.style.color=t.fontColor,r.classList="legend_text",r.style.textDecoration=t.hidden?"line-through":"";var o=document.createTextNode(t.text);r.appendChild(o),a.appendChild(l),a.appendChild(r),n.appendChild(a)})}}]})}$(document).ready(function(){RegularCalculate(),chartLine()}),$(".form-control").keypress(function(e){if(String.fromCharCode(e=e.which||event.keyCode).match(/[^((1\d)|(\d))(\.(\d\d)|\d){01}$]/g))return!1}),$(document).on("change",'[name="investmentTabs"]',function(){"regularInvestment"==$(this).val()?($("#existing_investment").hide(),$("#periodic_investment").show(),$(".oneTimeResult").css("opacity","1"),$(".sublableMonthly").show()):"oneTimeInvestment"==$(this).val()&&($("#periodic_investment").hide(),$("#existing_investment").show(),$(".oneTimeResult").css("opacity","0"),$(".sublableMonthly").hide())}),$(document).on("click","#calculate",function(){0==$(".error").length&&"regularInvestment"==$('[name="investmentTabs"]:checked').val()?(RegularCalculate(),$("html, body").animate({scrollTop:$(".col-lg-5").offset().top-50},500)):0==$(".error").length&&"oneTimeInvestment"==$('[name="investmentTabs"]:checked').val()&&(onetimeCalculate(),$("html, body").animate({scrollTop:$(".col-lg-5").offset().top-50},500)),0!==$(".error").length&&$("html, body").animate({scrollTop:$(".error").offset().top-50},500),myChart.data.datasets[0].data=chartInvested,myChart.data.datasets[1].data=chartFvval,myChart.update()});