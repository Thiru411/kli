var notData={},wlcmEnabled=0,macros={sw:"/service-worker.js",customOptinStatus:null,migdomain:"/service-worker",hasMigration:!0},__vizpush=__vizpush||{IframeEle:null,ContainerHtmlId:"viz-push-container",version:"1",advid:"VIZVRM6238",target:"mu-pl.lemnisk.co",domain:macros.domain,migDomain:macros.migdomain,hasMigration:macros.hasMigration,isCOActive:macros.customOptinStatus,dailyCookie:"_vwpnsent",stateCookie:"_vwpnstate",fcmMigCookie:"_vwpnfcm",pushSuppCookie:"_vwpnsupp",fpc:"_vz",prevState:"",fcmMigState:"",vapidPublicKey:"BFCXpBiv5bOzgLcLWie72tEcZqRtsPfk5rRdqm0M06NzMu9mhaJDM3hh4qPwKWxjn7GkpPhSLjiwT1jTT8sYtO0",swLoc:macros&&macros.sw?macros.sw:"/service-worker.js",mobileOnly:macros.mobileOnly?macros.mobileOnly:0,timeout:macros.timeout?macros.timeout:12e4,first:!1,ctaUrls:["lp1","lp2"],uuid:"",cont:'<style> .vizury-notification { display: block; overflow: hidden; border: 0px; position: fixed; z-index: 199999980;}</style> <iframe id = "http-push" class="vizury-notification" width="100%" height="100%"></iframe>',iframeContent:"",getCookie:function(t){var i=document.cookie;if(!t)return"";var e=i.split(";");for(var o in e)if(e.hasOwnProperty(o)){var n=e[o].match(/\s*(.*)=(.*)/);if(n&&n[1]===t&&n[2])return decodeURIComponent(n[2])}return""},setCookie:function(t,i,e,o){var n=o||__vizpush.domain;if(e&&e>0){var s=new Date;s.setDate(s.getDate()+e);var a=encodeURIComponent(i)+"; expires="+s.toUTCString()+"; path=/";n&&(a+="; domain="+n),document.cookie=t+"="+a}else document.cookie=t+"="+encodeURIComponent(i)},createDivElement:function(){var t=document.createElement("div");t.id=__vizpush.ContainerHtmlId,document.body.appendChild(t),__vizpush.SetDivContent()},close:function(){var t=document.getElementById("http-push");t&&(t.style.display="none")},showOptin:function(){return!!(!__vizpush.mobileOnly||__vizpush.mobileOnly&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))},SetDivContent:function(t){document.getElementById(__vizpush.ContainerHtmlId).innerHTML=__vizpush.cont,__vizpush.SetIframeContent(__vizpush.iframeContent),__vizpush.IdentifyEvent()},SetIframeContent:function(t){var i=document.getElementById("http-push").contentWindow.document;i.open(),i.write("<!DOCTYPE html>"),i.write(t),i.close(),__vizpush.IframeEle=parent.document.getElementById("http-push")},transAnimationTopAndBottom:function(t,i,e,o){var n=setInterval(function(){t.style[i]=e+"px",o<0?(e-=2)<o&&(t.style[i]=o+"px",clearInterval(n)):(e+=2)>o&&(t.style[i]=o+"px",clearInterval(n))},1)},triggerNotiBottom:function(t,i){__vizpush.transAnimationTopAndBottom(t,"bottom",i,0)},triggerNotiTop:function(t,i){__vizpush.transAnimationTopAndBottom(t,"top",i,0)},IdentifyEvent:function(){__vizpush.IframeEle.style.top="-136px",setTimeout(function(){__vizpush.triggerNotiTop(__vizpush.IframeEle,parseInt("-136px"))},1)},hasPushSupport:function(){if(/Chrome\/([0-9]+)\./.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&!/OPR\/([0-9]+)\./.test(navigator.userAgent)){if(navigator.userAgent.match(/Chrome\/([0-9]+)\./)[1]>=50)return!0}else if(/Firefox\/([0-9]+)\./.test(navigator.userAgent)){if(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]>=46)return!0}else if(/OPR\/([0-9]+)\./.test(navigator.userAgent)){if(navigator.userAgent.match(/OPR\/([0-9]+)\./)[1]>=48)return!0}return!1},logState:function(t,i,e){var o="";if(__vizpush.prevState!==t){__vizpush.setCookie(__vizpush.stateCookie,t,1);var n=encodeURIComponent(document.URL),s="?version="+__vizpush.version+"&advid="+__vizpush.advid+"&action="+t+"&origin="+n;i?("custom"===e&&(s+="&type=HTTPSCO"),o="https://"+__vizpush.target+"/analyze/optinInfo"+s):o="https://"+__vizpush.target+"/analyze/subMap"+s,__vizpush.first&&(o+="&useraction=1"),fetch(o,{credentials:"include"})}},logError:function(t){var i=encodeURIComponent(t),e="https://"+__vizpush.target+"/analyze/error?message="+i+"&advid="+__vizpush.advid+"&version="+__vizpush.version;fetch(e,{credentials:"include"})},logEvent:function(t,i,e,o){var n="https://"+__vizpush.target+"/analyze/notification?&version="+__vizpush.version+"&engid="+t+"&action="+e+"&tag="+i+"&ts="+o+"&advid="+__vizpush.advid;fetch(n,{credentials:"include"})},dismissNotification:function(t,i){setTimeout(function(){t.getNotifications().then(function(t){for(var e=(new Date).getTime(),o=0;o<t.length;o++)t[o].data.uuid===__vizpush.uuid&&(t[o].close(),logEvent(i.engid,i.uuid,"DISMISS",e))})},__vizpush.timeout)},sendWlPush:function(t){var i=(new Date).getTime();__vizpush.uuid=__vizpush.getUuid();var e={body:notData.body,tag:"wln",icon:notData.icon,requireInteraction:!0,data:{url:notData.lp,ts:i,engid:-1,uuid:__vizpush.uuid,orchestrated:0}};if(notData.image&&notData.image.enabled&&(e.image=notData.image.url),notData.button&&notData.button.enabled){var o=notData.button.cta;e.actions=o;for(var n=1;n<=e.actions.length;n++)e.actions[n-1].action="cta"+n,e.data[__vizpush.ctaUrls[n-1]]=e.actions[n-1].lp}t.showNotification(notData.title,e).then(function(){}).then(function(){__vizpush.logEvent(e.data.engid,e.data.uuid,"PUSH",i),__vizpush.dismissNotification(t,e.data)}).catch(function(t){__vizpush.logError(t.message)})},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},getUuid:function(){return(__vizpush.S4()+__vizpush.S4()+"-"+__vizpush.S4()+"-4"+__vizpush.S4().substr(0,3)+"-"+__vizpush.S4()+"-"+__vizpush.S4()+__vizpush.S4()+__vizpush.S4()).toLowerCase()},migrate:function(){var t=!1;navigator.serviceWorker.getRegistrations().then(function(i){for(var e=0;e<i.length;e++)if(i[e].scope.indexOf(__vizpush.migDomain)>-1){t=!0,i[e].unregister().then(function(t){!0===t&&__vizpush.register()});break}t||__vizpush.register(),__vizpush.setCookie(__vizpush.fcmMigCookie,1,1460)}).catch(function(t){__vizpush.logError(t.message)})},register:function(){"serviceWorker"in navigator?navigator.serviceWorker.register(__vizpush.swLoc).then(function(t){var i;/\/\w+\//.test(__vizpush.swLoc)?(t.installing?i=t.installing:t.waiting?i=t.waiting:t.active&&(i=t.active),i&&("activated"==i.state&&__vizpush.genSubscription(t),i.addEventListener("statechange",function(i){"activated"==i.target.state&&__vizpush.genSubscription(t)}))):navigator.serviceWorker.ready.then(function(){__vizpush.genSubscription(t)}).catch(function(t){__vizpush.logState("NS"),__vizpush.logError(t.message)})}).catch(function(t){__vizpush.logError(t.message)}):__vizpush.logState("NS")},urlBase64ToUint8Array:function(t){const i=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=window.atob(i),o=new Uint8Array(e.length);for(let t=0;t<e.length;++t)o[t]=e.charCodeAt(t);return o},genSubscription:function(t){t.pushManager.getSubscription().then(function(i){"default"==Notification.permission&&(__vizpush.first=!0,__vizpush.logState("OP",1,"native"));const e=__vizpush.urlBase64ToUint8Array(__vizpush.vapidPublicKey);t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(i){var e=i.getKey?i.getKey("p256dh"):"",o=e?btoa(String.fromCharCode.apply(null,new Uint8Array(e))):"",n=i.getKey?i.getKey("auth"):"",s=n?btoa(String.fromCharCode.apply(null,new Uint8Array(n))):"",a=i.endpoint;if(a=encodeURIComponent(a),o=encodeURIComponent(o),s=encodeURIComponent(s),a&&o&&s){if("AL"!==__vizpush.prevState){__vizpush.setCookie(__vizpush.stateCookie,"AL",1);var r=encodeURIComponent(document.URL),u="https://"+__vizpush.target+"/analyze/subMap?subid="+a+"&auth="+s+"&key="+o+"&version="+__vizpush.version+"&advid="+__vizpush.advid+"&action=AL&origin="+r+"&ck="+__vizpush.getCookie(__vizpush.fpc);__vizpush.first&&(u+="&useraction=1",wlcmEnabled&&__vizpush.sendWlPush(t)),fetch(u,{credentials:"include"})}}else __vizpush.logState("NS")}).catch(function(t){"denied"===Notification.permission?__vizpush.logState("BL"):"default"===Notification.permission&&/denied/.test(t)?(__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("CL")):__vizpush.logState("NS"),__vizpush.logError(t.message)})}).catch(function(t){__vizpush.logState("NS"),__vizpush.logError(t.message)})},later:function(){__vizpush.close(),__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("BL",1,"custom")},cross:function(){__vizpush.close(),__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("CL",1,"custom")},allow:function(t){t||(__vizpush.close(),__vizpush.logState("AL",1,"custom")),__vizpush.fcmMigState?__vizpush.register():__vizpush.migrate()},init:function(){if(!__vizpush.getCookie(__vizpush.dailyCookie)&&"https:"===document.location.protocol&&__vizpush.showOptin()){__vizpush.prevState=__vizpush.getCookie(__vizpush.stateCookie),__vizpush.migState=__vizpush.getCookie(__vizpush.migCookie),__vizpush.fcmMigState=__vizpush.getCookie(__vizpush.fcmMigCookie);var t=!1;document.addEventListener("readystatechange",function(){/interactive|complete/i.test(document.readyState)&&!t&&(t=!0,"default"==Notification.permission&&__vizpush.isCOActive?__vizpush.hasPushSupport()?(__vizpush.prevState="",__vizpush.createDivElement(),__vizpush.logState("OP",1,"custom")):__vizpush.getCookie(__vizpush.pushSuppCookie)||(__vizpush.setCookie(__vizpush.pushSuppCookie,1,365),__vizpush.logState("NS")):(__vizpush.isCOActive||"default"!=Notification.permission||(__vizpush.prevState=""),__vizpush.allow(!0)))},!0)}}};__vizpush.init();